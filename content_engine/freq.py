import re
from collections import Counter

# Данные из документа
text = """បាន	ការ	នៅ	និង	ដែល	មាន	ជា	នេះ	ថា	ក្នុង	របស់	លោក	ពី	មួយ	នឹង	ឲ្យ	នោះ	មិន	ទៅ	តែ	ត្រូវ	ដោយ	ហើយ	ឆ្នាំ	អ្នក	ពេល	គេ	ខ្ញុំ	ប្រទេស	អាច	គឺ	ក្រុម	ធ្វើ	ក៏	លើ	នៃ	ដើម្បី	យើង	មក	ទី	តាម	ទេ	ដល់	វា	ដែរ	ខ្លួន	សម្រាប់	ក្រុមហ៊ុន	ថ្ងៃ	ចំនួន	កម្ពុជា	ឡើង	ទៀត	ទាំង	បើ	និយាយ	ទទួល	ដ៏	ច្រើន	ផង	ដឹង	ជាមួយ	គ្នា	ខែ	នាក់	ប៉ុន្តែ	កំពុង	យ៉ាង	តម្លៃ	ប្រកួត	ក្រុង	តំបន់	ភាព	យក	ជាង	ចូល	នូវ	ពួកគេ	កាលពី	ណា	បន្ត	ជាតិ	រូប	មនុស្ស	កាល	ចំពោះ	ដូច	ខណៈ	វិញ	នាង	មុន	ភ្នំពេញ	លើក	ល្អ	ខាង	ដុល្លារ	ឃើញ	បញ្ហា	ប្រើ	ចាប់	ទឹក	តើ	ប្រាក់	ធំ	ខ្មែរ	ចេញ	ខេត្ត	ផ្នែក	ចិត្ត	គាត់	ថ្មី	បង្ហាញ	ស៊ី	អាមេរិក	គឺជា	អ្វី	លក់	ចង់	ដាក់	ម្នាក់	រួម	រថយន្ត	ផ្លូវ	ភាគរយ	កើន	ជួយ	ពីរ	លាន	ផ្តល់	រដ្ឋ	ខ្លាំង	ជាច្រើន	ទីក្រុង	ជន	កីឡា	ក្រោយ	ប្រាប់	រដ្ឋាភិបាល	កាន់	ការងារ	រក	ព្រោះ	រឿង	ប៉ុន្តែ	ឡើយ	មុខ	ថ្លែង	ធ្វើឲ្យ	បី	នាំ	ច្បាប់	ដី	ដូចជា	កម	ផ្ទះ	បញ្ជាក់	ចុះ	បំផុត	ចិត្ត	ពួក	បែប	ចិន	កីឡាករ	កញ្ញា	គម្រោង	បង្កើត	នា	សារ	សេដ្ឋកិច្ច	ធនាគារ	អស់	ភាគ	កូន	ប្រធាន	ផ្សារ	ខ្ពស់	គ្មាន	បន្ត	ណាស់	សម្រេច	គួរ	គ្រប់	ប្រជាជន	បន្ថែម	រយៈ	ខ្លះ	បទ	ទិញ	ទើប	វិនិយោគ	មានការ	លេខ	ថៃ	មើល	បុរស	យុវជន	ស្រី	នយោបាយ	កន្លែង	គិត	បើក	ដូច្នេះ	រូបថត	វាយ	ប្រភេទ	សំខាន់	បន្ទាប់ពី	កម្មវិធី	រយៈពេល	ផលិត	ឈ្នះ	ពិភពលោក	ភ្ញៀវ	ដោយសារ	ស្រុក	អាយុ	ចំណាយ	អំពី	ហ៊ុន	សិក្សា	សម	ស្ថិត	ថ្នាក់	សា	កំណើន	ក្រោម	ធ្វើការ	ក្លាយ	ដំណើរ	គ្រឿង	ជួប	ត្រឹម	ប្រចាំ	មន្ត្រី	ពាន់	វ័យ	ទោះ	ប្រព័ន្ធ	លេង	កាត់	បញ្ចប់	រង	អាហារ	ឈ្មោះ	បច្ចុប្បន្ន	ប៉ុណ្ណោះ	កា	ទុក	ម្ចាស់	ប្រឆាំង	ស្រ	ចូលរួម	អារម្មណ៍	រថយន្ត	ធ្លាប់	ចុង	ផល	រួច	ម្តង	គ្រួសារ	ទ្រព្យ	ធ្លាក់	ព្រះ	អា	ពិសេស	ចំណែក	បរទេស	ពិត	ដើម	រៀបចំ	ជប៉ុន	អន្តរជាតិ	ក្រសួង	កិច្ច	ទ្រព្យ	ដំបូង	អគារ	ប៉ូលិស	រហូត	រី	តារា	អង្គការ	យ៉	សង្គម	បន្ទាប់	ក្រៅ	តែង	ជិត	ក្តី	ទូរស័ព្ទ	កើត	ជាប់	លី	រាជធានី	តម្រូវ	មកពី	ម៉ោង	ជំរុញ	ការពារ	កាន់តែ	កណ្តាល	ហាង	ពេញ	នាយក	នានា	ម៉ា	ទាំងអស់	គាំទ្រ	សកម្មភាព	ជើង	តូច	តាមរយៈ	ប្រមាណ	ស្លាប់	ជីវិត	តាំង	សត្វ	លោកស្រី	ដៃ	ខុស	បង្កើន	ដើរ	ព័ត	ប្រើប្រាស់	យល់	ជំនាញ	ជំងឺ	អភិវឌ្ឍ	គណបក្ស	លទ្ធផល	អតិថិជន	កម្លាំង	សូម	ពាណិជ្ជកម្ម	គ្រប់គ្រង	បានឲ្យ	គូ	សាលា	អនុវត្ត	យោង	ផ្ទាល់	បង្ក	ពលរដ្ឋ	ផ្សេងៗ	ជាមួយនឹង	ដឹក	កំណត់	គោល	រាប់	តវ៉ា	លក្ខណៈ	ប្រកាស	មែន	កូរ៉េ	ទាំងនោះ	សុខ	បក្ស	ចេះ	សមាជិក	ពិតជា	និយម	ម៉ឺន	សិទ្ធិ	រៀន	តុលាការ	ព័ន្ធ	ប៉ះពាល់	ម៉ូតូ	រស់	ឱកាស	នៅតែ	កុមារ	សម្តែង	ករណី	ក៏បាន	ពាក្យ	អូ	ច្បាស់	ចំណុច	ជូន	និស្សិត	ប្រឈម	មា	ដង	ទាន់	សុំ	ថ្លៃ	រវាង	ភូមិ	សុខភាព	កោះ	ចាប់ផ្តើម	ផ្ដល់	មន្ត្រី	សម្លាប់	លុយ	អះអាង	រីក	នី	ផ្សេង	មិនមែន	ពាក់	ហេតុ	ព្យាយាម	រស់នៅ	ទៅលើ	ប្រ	ដំណើរការ	អាស៊ី	តិច	សែន	ទំនើប	ប៉ុន្មាន	អឺរ៉ុប	ចំ	វី	សេចក្តី	អភិវឌ្ឍន៍	បណ្តា	ភាគច្រើន	បាត់	រីឯ	ចាញ់	អ៊ី	សំណង់	សរុប	ប៉ុស្តិ៍	ឈាន	សាច់	បា	ផលិតផល	រាល់	សមត្ថភាព	ពណ៌	ប្រសើរ	មិនបាន	ស្គាល់	ស្ត្រី	ទាក់ទង	សង់	អ្នកស្រី	ពុំ	ជាដើម	កន្លង	សាងសង់	ជុំវិញ	មាស	ប្រជាពលរដ្ឋ	គ្រូ	រោងចក្រ	ទំហំ	រក្សា	ព្រម	អត្រា	អំពើ	បម្រើ	វិធី	ម៉ែត្រ	ខណ្ឌ	ដោយសារតែ	ថ្មីៗ	រត់	ប្រហែល	ម្តាយ	សេវាកម្ម	ត្រី	ទូរទស្សន៍	វៀតណាម	ពិធី	ធៀប	ពីព្រោះ	ឯង	ទេសចរ	ហិរញ្ញវត្ថុ	ប្រាស់	កើតឡើង	រ៉	ផ្តើម	សង្ស័យ	បោះឆ្នោត	ជ័យ	សិស្ស	ព្យាបាល	ប្រជា	រំពឹង	ទីតាំង	ការណ៍	ជិះ	មូលដ្ឋាន	សង្ឃឹម	ចម្រៀង	ក្មេង	ចុងក្រោយ	អតីត	កែ	សាធារណៈ	ព្រឹត្តិការណ៍	ស្រឡាញ់	តាំងពី	កម្មករ	អង់គ្លេស	គំនិត	ប្រេង	បណ្តាល	មេ	រៀប	អប់រំ	តា	ចាំ	សហ	គ្រាន់	ទាប	គ្រោះ	អំឡុង	ភេទ	ពេលនេះ	បង់	មិត្ត	នគរបាល	សមាគម	អត់	ឪពុក	បុគ្គលិក	បារាំង	ដា	ស្ថានភាព	វគ្គ	យន្តហោះ	គ្រាប់	រចនា	ស្រប	ផ្លាស់	ជំនួយ	ធម្មតា	ជាពិសេស	តែងតែ	សេវា	រ៉ា	ក្តី	ក្បាល	ស្ថិតនៅ	ទូទៅ	បំពាក់	ចលន	សណ្ឋាគារ	សរសេរ	ជាន់	វិទ្យា	របួស	ទេសចរណ៍	ផ្សាយ	សមុទ្រ	ដដែល	កម្ម	ភាសា	បង	ចាក់	លួច	តុ	អំណាច	ចរាចរណ៍	ប្រសិន	បញ្ជូន	ប្រសិនបើ	បឹង	ទស្សនា	ជោគជ័យ	តំណាង	អាជ្ញាធរ	បំពេញ	ប្រធានាធិបតី"""

# Извлекаем только кхмерские слова (токены)
words = [word.split('\t')[0] for word in text.split() if '\t' in word or word.strip()]

# Подсчитываем все буквы
all_letters = []
for word in words:
    # Фильтруем только кхмерские символы (Unicode диапазон кхмерского письма)
    for char in word:
        if '\u1780' <= char <= '\u17FF':  # Диапазон кхмерских символов
            all_letters.append(char)

# Подсчитываем частоту
letter_freq = Counter(all_letters)

# Сортируем по частоте (от большей к меньшей)
sorted_freq = sorted(letter_freq.items(), key=lambda x: x[1], reverse=True)

# Вычисляем общее количество и проценты
total = sum(letter_freq.values())

print(f"Частота употребления кхмерских букв")
print(f"Всего символов проанализировано: {total}\n")
print(f"{'Ранг':<6} {'Буква':<8} {'Частота':<10} {'Процент':<10} {'Накопительный %'}")
print("=" * 60)

cumulative = 0
for rank, (letter, count) in enumerate(sorted_freq, 1):
    percent = (count / total) * 100
    cumulative += percent
    print(f"{rank:<6} {letter:<8} {count:<10} {percent:>6.2f}%    {cumulative:>6.2f}%")

# Статистика
print("\n" + "=" * 60)
print(f"Всего уникальных букв: {len(letter_freq)}")
print(f"Топ-10 букв покрывают: {sum([count for _, count in sorted_freq[:10]]) / total * 100:.2f}% текста")
print(f"Топ-20 букв покрывают: {sum([count for _, count in sorted_freq[:20]]) / total * 100:.2f}% текста")